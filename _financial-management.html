<div class="tab-container">
    <div class="border-b border-gray-200 mb-6">
        <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
            <a href="#deposits" class="tab-link shrink-0 border-b-2 px-3 pb-3 text-sm font-medium active-tab">
                <i class="fas fa-arrow-down mr-2"></i> Lệnh nạp tiền
            </a>
            <a href="#withdrawals"
                class="tab-link shrink-0 border-b-2 border-transparent px-3 pb-3 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                <i class="fas fa-arrow-up mr-2"></i> Yêu cầu rút tiền
            </a>
            <a href="#bank-settings"
                class="tab-link shrink-0 border-b-2 border-transparent px-3 pb-3 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                <i class="fas fa-building mr-2"></i> Tài khoản Cty
            </a>
            <a href="#partner-accounts"
                class="tab-link shrink-0 border-b-2 border-transparent px-3 pb-3 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                <i class="fas fa-handshake mr-2"></i> Tài khoản Đối tác
            </a>
            <a href="#debt-management"
                class="tab-link shrink-0 border-b-2 border-transparent px-3 pb-3 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                <i class="fas fa-balance-scale mr-2"></i> Quản lý Công nợ
            </a>
        </nav>
    </div>

    <div id="deposits" class="tab-content">
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
                <div class="flex flex-col md:flex-row justify-between md:items-center mb-4 gap-3">
                    <h3 class="text-xl font-bold text-gray-800">Duyệt Giao dịch Nạp tiền</h3>
                    <button id="manual-deposit-btn"
                        class="text-sm bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg flex items-center shadow-sm">
                        <i class="fas fa-plus-circle mr-2"></i>Nạp tiền Thủ công
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <input type="text" placeholder="Mã lệnh, Mã KH..." class="w-full px-3 py-2 border rounded-lg">
                    <select class="w-full px-3 py-2 border rounded-lg">
                        <option>-- Trạng thái --</option>
                        <option>Chờ xác nhận</option>
                        <option>Đã xác nhận</option>
                        <option>Đã hủy</option>
                    </select>
                    <input type="date" class="w-full px-3 py-2 border rounded-lg text-gray-500">
                    <button class="w-full bg-gray-700 text-white font-bold rounded-lg"><i
                            class="fas fa-filter mr-2"></i>Lọc</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100 text-left">
                            <tr>
                                <th class="p-3 font-semibold">Mã Lệnh</th>
                                <th class="p-3 font-semibold">Khách hàng (UserID)</th>
                                <th class="p-3 font-semibold text-right">Số tiền (VND)</th>
                                <th class="p-3 font-semibold">Ngày tạo</th>
                                <th class="p-3 font-semibold">Người xử lý</th>
                                <th class="p-3 font-semibold">Ngày xử lý</th>
                                <th class="p-3 font-semibold text-center">Trạng thái</th>
                                <th class="p-3 font-semibold text-center">Hành động</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr data-transaction-id="N-0805-1"
                                data-history='[{"action": "Tạo lệnh", "performer": "Nguyễn Văn A (KH)", "timestamp": "2025-08-05 14:15:00", "reason": ""}]'>
                                <td class="p-3 font-medium">N-0805-1</td>
                                <td class="p-3">Nguyễn Văn A (KH001)</td>
                                <td class="p-3 text-right">5,000,000</td>
                                <td class="p-3">05/08/2025 14:15</td>
                                <td class="p-3 text-gray-500">-</td>
                                <td class="p-3 text-gray-500">-</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium">Chờ
                                        xác nhận</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <button
                                        class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 text-xs rounded">Xác
                                        nhận</button>
                                    <button
                                        class="cancel-deposit-btn bg-red-500 hover:bg-red-600 text-white px-3 py-1 text-xs rounded">Hủy
                                        Lệnh</button>
                                </td>
                            </tr>
                            <tr data-transaction-id="N-0805-2"
                                data-history='[{"action": "Xác nhận", "performer": "Admin", "timestamp": "2025-08-05 11:35:12", "reason": "Giao dịch hợp lệ."}, {"action": "Tạo lệnh", "performer": "Trần Thị B (KH)", "timestamp": "2025-08-05 11:30:00", "reason": ""}]'>
                                <td class="p-3 font-medium">N-0805-2</td>
                                <td class="p-3">Trần Thị B (KH002)</td>
                                <td class="p-3 text-right">10,000,000</td>
                                <td class="p-3">05/08/2025 11:30</td>
                                <td class="p-3">Admin</td>
                                <td class="p-3">05/08/2025 11:35</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Đã
                                        xác nhận</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <button
                                        class="restore-btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 text-xs rounded">Khôi
                                        phục
                                    </button>
                                    <button class="view-history-btn text-indigo-600 text-xs hover:underline">Xem lịch
                                        sử
                                    </button>
                                </td>
                            </tr>
                            <tr data-transaction-id="N-0804-3"
                                data-history='[{"action": "Hủy lệnh", "performer": "ketoan.1", "timestamp": "2025-08-04 10:00:25", "reason": "Khách hàng yêu cầu hủy lệnh nạp do tạo nhầm số tiền."}, {"action": "Tạo lệnh", "performer": "Vũ Anh Dũng (KH)", "timestamp": "2025-08-04 09:45:00", "reason": ""}]'>
                                <td class="p-3 font-medium">N-0804-3</td>
                                <td class="p-3">Vũ Anh Dũng (KH003)</td>
                                <td class="p-3 text-right">2,000,000</td>
                                <td class="p-3">04/08/2025 09:45</td>
                                <td class="p-3">ketoan.1</td>
                                <td class="p-3">04/08/2025 10:00</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full font-medium">Đã
                                        hủy</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <button
                                        class="restore-btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 text-xs rounded">Khôi
                                        phục
                                    </button>
                                    <button class="view-history-btn text-indigo-600 text-xs hover:underline">Xem lịch
                                        sử
                                    </button>
                                </td>
                            </tr>
                            <tr data-transaction-id="N-0802-5"
                                data-history='[{"action": "Admin nạp tiền thủ công", "performer": "Admin", "timestamp": "2025-08-02 16:20:05", "reason": "KH chuyển khoản sai cú pháp ngày 01/8, đã đối soát và nạp tay. Mã GD ngân hàng: FT24080112345"}]'>
                                <td class="p-3 font-medium">N-0802-5</td>
                                <td class="p-3">Lê Văn C (KH004)</td>
                                <td class="p-3 text-right">3,500,000</td>
                                <td class="p-3">02/08/2025 16:20</td>
                                <td class="p-3">Admin</td>
                                <td class="p-3">02/08/2025 16:20</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium">Nạp
                                        tay</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <button
                                        class="restore-btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 text-xs rounded">Khôi
                                        phục
                                    </button>
                                    <button class="view-history-btn text-indigo-600 text-xs hover:underline">Xem lịch
                                        sử
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="withdrawals" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Xử lý Giao dịch Rút tiền</h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <input type="text" placeholder="Mã lệnh, Mã KH..." class="w-full px-3 py-2 border rounded-lg">
                    <select class="w-full px-3 py-2 border rounded-lg">
                        <option>-- Trạng thái --</option>
                        <option>Chờ xác nhận</option>
                        <option>Đã xác nhận</option>
                        <option>Đã hủy</option>
                    </select>
                    <input type="date" class="w-full px-3 py-2 border rounded-lg text-gray-500">
                    <button class="w-full bg-gray-700 text-white font-bold rounded-lg"><i
                            class="fas fa-filter mr-2"></i>Lọc</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100 text-left">
                            <tr>
                                <th class="p-3 font-semibold">Mã Yêu cầu</th>
                                <th class="p-3 font-semibold">Khách hàng (UserID)</th>
                                <th class="p-3 font-semibold text-right">Số tiền (VND)</th>
                                <th class="p-3 font-semibold">Ngày tạo</th>
                                <th class="p-3 font-semibold">Người xử lý</th>
                                <th class="p-3 font-semibold">Ngày xử lý</th>
                                <th class="p-3 font-semibold text-center">Trạng thái</th>
                                <th class="p-3 font-semibold text-center">Mã QR</th>
                                <th class="p-3 font-semibold text-center">Hành động</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr data-transaction-id="R-0805-1">
                                <td class="p-3 font-medium">R-0805-1</td>
                                <td class="p-3">Lê Văn C (KH004)</td>
                                <td class="p-3 text-right">2,500,000</td>
                                <td class="p-3">05/08/2025 10:20</td>
                                <td class="p-3 text-gray-500">-</td>
                                <td class="p-3 text-gray-500">-</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full font-medium">Chờ
                                        xử lý</span></td>
                                <td class="p-3 text-center">
                                    <button
                                        class="view-withdrawal-btn bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full"
                                        data-withdrawal-id="R-0805-1"
                                        data-customer="Lê Văn C (KH004)"
                                        data-amount="2,500,000"
                                        data-status="pending"
                                        data-bank-info='{"bank": "Vietcombank", "account": "0123456789012", "name": "LE VAN C"}'
                                        title="Xem chi tiết giao dịch">
                                        <i class="fas fa-qrcode"></i>
                                    </button>
                                </td>
                                <td class="p-3 text-center">
                                    <div class="flex flex-col gap-1">
                                        <button class="view-history-btn bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 text-xs rounded whitespace-nowrap">Lịch sử</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-transaction-id="R-0804-5">
                                <td class="p-3 font-medium">R-0804-5</td>
                                <td class="p-3">Phạm Thị D (KH005)</td>
                                <td class="p-3 text-right">1,000,000</td>
                                <td class="p-3">04/08/2025 16:00</td>
                                <td class="p-3">Admin</td>
                                <td class="p-3">04/08/2025 16:05</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Thành
                                        công</span></td>
                                <td class="p-3 text-center">
                                    <button
                                        class="view-withdrawal-btn bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full"
                                        data-withdrawal-id="R-0804-5"
                                        data-customer="Phạm Thị D (KH005)"
                                        data-amount="1,000,000"
                                        data-status="completed"
                                        data-bank-info='{"bank": "Techcombank", "account": "9876543210123", "name": "PHAM THI D"}'
                                        title="Xem chi tiết giao dịch">
                                        <i class="fas fa-info-circle"></i>
                                    </button>
                                </td>
                                <td class="p-3 text-center">
                                    <div class="flex flex-col gap-1">
                                        <button class="view-history-btn bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 text-xs rounded whitespace-nowrap">Lịch sử</button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-transaction-id="R-0803-2"
                                data-history='[{"action": "Từ chối", "performer": "Admin", "timestamp": "2025-08-03 11:10:30", "reason": "Thông tin tài khoản nhận không chính xác. Tên chủ tài khoản không khớp với tên đăng ký trên hệ thống."}, {"action": "Tạo yêu cầu", "performer": "Hoàng Văn E (KH)", "timestamp": "2025-08-03 11:00:00", "reason": ""}]'>
                                <td class="p-3 font-medium">R-0803-2</td>
                                <td class="p-3">Hoàng Văn E (KH006)</td>
                                <td class="p-3 text-right">5,000,000</td>
                                <td class="p-3">03/08/2025 11:00</td>
                                <td class="p-3">Admin</td>
                                <td class="p-3">03/08/2025 11:10</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full font-medium">Bị từ
                                        chối</span></td>
                                <td class="p-3 text-center">
                                    <button
                                        class="view-withdrawal-btn bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full"
                                        data-withdrawal-id="R-0803-2"
                                        data-customer="Hoàng Văn E (KH006)"
                                        data-amount="5,000,000"
                                        data-status="rejected"
                                        data-bank-info='{"bank": "BIDV", "account": "1234567890123", "name": "HOANG VAN E"}'
                                        title="Xem chi tiết giao dịch">
                                        <i class="fas fa-info-circle"></i>
                                    </button>
                                </td>
                                <td class="p-3 text-center">
                                    <div class="flex flex-col gap-1">
                                        <button class="view-history-btn bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1 text-xs rounded whitespace-nowrap">Lịch sử</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="bank-settings" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Tài khoản Ngân hàng Công ty</h3>
                    <button id="add-bank-account-btn"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg flex items-center shadow-sm"><i
                            class="fas fa-plus mr-2"></i>Thêm tài khoản</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100 text-left">
                            <tr>
                                <th class="p-3 font-semibold">Ngân hàng</th>
                                <th class="p-3 font-semibold">Số tài khoản</th>
                                <th class="p-3 font-semibold">Chủ tài khoản</th>
                                <th class="p-3 font-semibold text-right">Hạn mức/ngày (VND)</th>
                                <th class="p-3 font-semibold text-center">Trạng thái</th>
                                <th class="p-3 font-semibold text-center">Hành động</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr data-bank-name="Vietcombank" data-account-number="0123456789"
                                data-account-name="CTY TNHH ORDER SYSTEM" data-limit="500000000" data-status="active">
                                <td class="p-3">Vietcombank</td>
                                <td class="p-3 font-mono">0123456789</td>
                                <td class="p-3">CTY TNHH ORDER SYSTEM</td>
                                <td class="p-3 text-right">500,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Hoạt
                                        động</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-bank-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-bank-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-bank-status-link text-orange-600 hover:underline text-xs">Tạm dừng</a>
                                </td>
                            </tr>
                            <tr data-bank-name="Techcombank" data-account-number="9876543210"
                                data-account-name="CTY TNHH ORDER SYSTEM" data-limit="500000000" data-status="paused">
                                <td class="p-3">Techcombank</td>
                                <td class="p-3 font-mono">9876543210</td>
                                <td class="p-3">CTY TNHH ORDER SYSTEM</td>
                                <td class="p-3 text-right">500,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-gray-200 text-gray-800 text-xs rounded-full font-medium">Tạm
                                        dừng</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-bank-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-bank-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-bank-status-link text-green-600 hover:underline text-xs">Chạy</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Partner Accounts Tab -->
    <div id="partner-accounts" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Tài khoản Ngân hàng Đối tác</h3>
                    <button id="add-partner-account-btn"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg flex items-center shadow-sm"><i
                            class="fas fa-plus mr-2"></i>Thêm tài khoản</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100 text-left">
                            <tr>
                                <th class="p-3 font-semibold">Tên gợi nhớ</th>
                                <th class="p-3 font-semibold">Ngân hàng</th>
                                <th class="p-3 font-semibold">Số tài khoản</th>
                                <th class="p-3 font-semibold">Chủ tài khoản</th>
                                <th class="p-3 font-semibold text-right">Hạn mức/ngày (VND)</th>
                                <th class="p-3 font-semibold text-center">Trạng thái</th>
                                <th class="p-3 font-semibold text-center">Hành động</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr data-bank-name="Vietcombank" data-account-number="0123456789012"
                                data-account-name="TOKYO ABC VIETNAM" data-limit="200000000" data-status="active">
                                <td class="p-3">
                                    <div class="font-medium text-gray-900">Tokyo ABC - VCB</div>
                                    <div class="text-xs text-gray-500">Nhà cung cấp chính Nhật Bản</div>
                                </td>
                                <td class="p-3">Vietcombank</td>
                                <td class="p-3 font-mono">0123456789012</td>
                                <td class="p-3">TOKYO ABC VIETNAM</td>
                                <td class="p-3 text-right">200,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Hoạt
                                        động</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-partner-account-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-partner-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-partner-account-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-partner-status-link text-orange-600 hover:underline text-xs">Tạm dừng</a>
                                </td>
                            </tr>
                            <tr data-bank-name="BIDV" data-account-number="9876543210987"
                                data-account-name="BIDV PARTNER ACCOUNT" data-limit="150000000" data-status="active">
                                <td class="p-3">
                                    <div class="font-medium text-gray-900">Đối tác BIDV</div>
                                    <div class="text-xs text-gray-500">Tài khoản thanh toán phụ</div>
                                </td>
                                <td class="p-3">BIDV</td>
                                <td class="p-3 font-mono">9876543210987</td>
                                <td class="p-3">BIDV PARTNER ACCOUNT</td>
                                <td class="p-3 text-right">150,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Hoạt
                                        động</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-partner-account-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-partner-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-partner-account-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-partner-status-link text-orange-600 hover:underline text-xs">Tạm dừng</a>
                                </td>
                            </tr>
                            <tr data-bank-name="Techcombank" data-account-number="1111222233334444"
                                data-account-name="OSAKA MATERIALS VIETNAM" data-limit="300000000" data-status="paused">
                                <td class="p-3">
                                    <div class="font-medium text-gray-900">Osaka Materials - TCB</div>
                                    <div class="text-xs text-gray-500">Nhà cung cấp vật liệu xây dựng</div>
                                </td>
                                <td class="p-3">Techcombank</td>
                                <td class="p-3 font-mono">1111222233334444</td>
                                <td class="p-3">OSAKA MATERIALS VIETNAM</td>
                                <td class="p-3 text-right">300,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-gray-200 text-gray-800 text-xs rounded-full font-medium">Tạm
                                        dừng</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-partner-account-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-partner-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-partner-account-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-partner-status-link text-green-600 hover:underline text-xs">Chạy</a>
                                </td>
                            </tr>
                            <tr data-bank-name="VietinBank" data-account-number="5555666677778888"
                                data-account-name="KYOTO STEEL VIETNAM" data-limit="250000000" data-status="active">
                                <td class="p-3">
                                    <div class="font-medium text-gray-900">Kyoto Steel - VTB</div>
                                    <div class="text-xs text-gray-500">Nhà cung cấp thép chất lượng cao</div>
                                </td>
                                <td class="p-3">VietinBank</td>
                                <td class="p-3 font-mono">5555666677778888</td>
                                <td class="p-3">KYOTO STEEL VIETNAM</td>
                                <td class="p-3 text-right">250,000,000</td>
                                <td class="p-3 text-center"><span
                                        class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Hoạt
                                        động</span></td>
                                <td class="p-3 text-center space-x-2">
                                    <a href="#" class="edit-partner-account-link text-indigo-600 hover:underline text-xs">Sửa</a> |
                                    <a href="#"
                                        class="assign-partner-permission-link text-green-600 hover:underline text-xs font-semibold">Gán
                                        quyền</a> |
                                    <a href="#" data-target-page="_bank-transaction-history.html" data-target-title="Lịch sử Giao dịch Ngân hàng" class="nav-link view-partner-account-history-link text-blue-600 hover:underline text-xs font-semibold">Lịch sử</a> |
                                    <a href="#" class="toggle-partner-status-link text-orange-600 hover:underline text-xs">Tạm dừng</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Debt Management Tab -->
    <div id="debt-management" class="tab-content hidden">
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6">Tình trạng Công nợ với Đối tác</h3>
                
                <!-- Quick Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-red-900">Mình đang nợ</h4>
                                <p class="text-3xl font-bold text-red-600 mt-2">85,500,000 ₫</p>
                                <p class="text-sm text-red-700 mt-1">3 đối tác</p>
                            </div>
                            <i class="fas fa-exclamation-triangle text-red-500 text-3xl"></i>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-green-900">Đối tác giữ thừa</h4>
                                <p class="text-3xl font-bold text-green-600 mt-2">42,300,000 ₫</p>
                                <p class="text-sm text-green-700 mt-1">2 đối tác</p>
                            </div>
                            <i class="fas fa-money-bill-wave text-green-500 text-3xl"></i>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-6 rounded-lg border-l-4 border-gray-400">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-900">Cân bằng</h4>
                                <p class="text-3xl font-bold text-gray-600 mt-2">0 ₫</p>
                                <p class="text-sm text-gray-700 mt-1">1 đối tác</p>
                            </div>
                            <i class="fas fa-balance-scale text-gray-500 text-3xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Partner Debt Details -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-gray-800">Chi tiết theo Đối tác</h4>
                    
                    <!-- Partner 1: Admin owes -->
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <h5 class="font-semibold text-red-900">Tokyo ABC Supply - VCB</h5>
                                    <span class="ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">Mình nợ</span>
                                </div>
                                <p class="text-sm text-red-700 mb-3">
                                    Khách hàng chưa nạp đủ tiền nhưng đã mua hàng. Đối tác cần tiền để thanh toán cho nhà cung cấp.
                                </p>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">Tổng đơn hàng:</span>
                                        <span class="font-semibold">65,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Khách đã nạp:</span>
                                        <span class="font-semibold">20,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-red-700">Số nợ:</span>
                                        <span class="font-bold text-red-600">45,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Ngày gần nhất:</span>
                                        <span class="font-semibold">15/09/2025</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4 flex flex-col space-y-2">
                                <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-credit-card mr-1"></i>Tạo lệnh tất toán
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-eye mr-1"></i>Xem chi tiết
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Partner 2: Admin owes -->
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <h5 class="font-semibold text-red-900">Osaka Steel Corp - TCB</h5>
                                    <span class="ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">Mình nợ</span>
                                </div>
                                <p class="text-sm text-red-700 mb-3">
                                    Đối tác đã ứng tiền mua hàng, chờ khách hàng nạp tiền vào tài khoản.
                                </p>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">Tổng đơn hàng:</span>
                                        <span class="font-semibold">28,500,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Khách đã nạp:</span>
                                        <span class="font-semibold">0 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-red-700">Số nợ:</span>
                                        <span class="font-bold text-red-600">28,500,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Ngày gần nhất:</span>
                                        <span class="font-semibold">18/09/2025</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4 flex flex-col space-y-2">
                                <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-credit-card mr-1"></i>Tạo lệnh tất toán
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-eye mr-1"></i>Xem chi tiết
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Partner 3: Partner holds excess -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <h5 class="font-semibold text-green-900">Kyoto Electronics - VTB</h5>
                                    <span class="ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Đối tác giữ thừa</span>
                                </div>
                                <p class="text-sm text-green-700 mb-3">
                                    Khách hàng nạp tiền nhiều hơn cần thiết, có thể yêu cầu hoàn trả số dư thừa.
                                </p>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">Tổng đơn hàng:</span>
                                        <span class="font-semibold">35,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Khách đã nạp:</span>
                                        <span class="font-semibold">50,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-green-700">Số dư thừa:</span>
                                        <span class="font-bold text-green-600">15,000,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Ngày gần nhất:</span>
                                        <span class="font-semibold">17/09/2025</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4 flex flex-col space-y-2">
                                <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-arrow-left mr-1"></i>Yêu cầu hoàn trả
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-eye mr-1"></i>Xem chi tiết
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Partner 4: Partner holds excess -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <h5 class="font-semibold text-green-900">Nagoya Parts Ltd - MB</h5>
                                    <span class="ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Đối tác giữ thừa</span>
                                </div>
                                <p class="text-sm text-green-700 mb-3">
                                    Đơn hàng bị hủy sau khi khách đã nạp tiền, cần yêu cầu đối tác hoàn trả.
                                </p>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">Đơn hàng hủy:</span>
                                        <span class="font-semibold">27,300,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Khách đã nạp:</span>
                                        <span class="font-semibold">27,300,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-green-700">Cần hoàn trả:</span>
                                        <span class="font-bold text-green-600">27,300,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Ngày hủy:</span>
                                        <span class="font-semibold">19/09/2025</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4 flex flex-col space-y-2">
                                <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-arrow-left mr-1"></i>Yêu cầu hoàn trả
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-eye mr-1"></i>Xem chi tiết
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Partner 5: Balanced -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <h5 class="font-semibold text-gray-900">Hiroshima Tech Co - BIDV</h5>
                                    <span class="ml-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full">Cân bằng</span>
                                </div>
                                <p class="text-sm text-gray-700 mb-3">
                                    Tình trạng công nợ cân bằng, không có số tiền nợ hoặc thừa.
                                </p>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-600">Tổng đơn hàng:</span>
                                        <span class="font-semibold">15,800,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Khách đã nạp:</span>
                                        <span class="font-semibold">15,800,000 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-700">Số dư:</span>
                                        <span class="font-bold text-gray-600">0 ₫</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-600">Ngày gần nhất:</span>
                                        <span class="font-semibold">16/09/2025</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ml-4 flex flex-col space-y-2">
                                <button class="bg-gray-400 text-white px-4 py-2 rounded text-sm cursor-not-allowed" disabled>
                                    <i class="fas fa-check mr-1"></i>Đã cân bằng
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">
                                    <i class="fas fa-eye mr-1"></i>Xem chi tiết
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mt-8 flex flex-wrap gap-4">
                    <button class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg">
                        <i class="fas fa-exclamation-triangle mr-2"></i>Tất toán tất cả nợ (85,500,000 ₫)
                    </button>
                    <button class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg">
                        <i class="fas fa-arrow-left mr-2"></i>Yêu cầu hoàn trả tất cả (42,300,000 ₫)
                    </button>
                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg">
                        <i class="fas fa-file-export mr-2"></i>Xuất báo cáo công nợ
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bank Transaction History Modal -->
<div id="bank-history-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">Lịch sử Giao dịch Tài khoản Ngân hàng</h3>
                <button id="close-bank-history-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <!-- Bank Account Info -->
                <div id="bank-account-info" class="bg-blue-50 p-4 rounded-lg mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <span class="text-sm text-gray-600">Ngân hàng:</span>
                            <p id="bank-name" class="font-semibold text-lg">-</p>
                        </div>
                        <div>
                            <span class="text-sm text-gray-600">Số tài khoản:</span>
                            <p id="account-number" class="font-semibold text-lg font-mono">-</p>
                        </div>
                        <div>
                            <span class="text-sm text-gray-600">Chủ tài khoản:</span>
                            <p id="account-holder" class="font-semibold text-lg">-</p>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                    <select id="transaction-type-filter" class="px-3 py-2 border rounded-lg">
                        <option value="">-- Loại giao dịch --</option>
                        <option value="deposit">Nạp tiền</option>
                        <option value="withdrawal">Rút tiền</option>
                    </select>
                    <input type="date" id="from-date-filter" class="px-3 py-2 border rounded-lg">
                    <input type="date" id="to-date-filter" class="px-3 py-2 border rounded-lg">
                    <input type="text" id="amount-filter" placeholder="Số tiền..." class="px-3 py-2 border rounded-lg">
                    <button id="filter-bank-history" class="bg-blue-500 hover:bg-blue-600 text-white font-bold rounded-lg">
                        <i class="fas fa-filter mr-2"></i>Lọc
                    </button>
                </div>

                <!-- Summary Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                        <div class="flex items-center">
                            <i class="fas fa-arrow-down text-green-500 text-2xl mr-3"></i>
                            <div>
                                <p class="text-sm text-gray-600">Tổng nạp</p>
                                <p id="total-deposits" class="text-xl font-bold text-green-600">0 ₫</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                        <div class="flex items-center">
                            <i class="fas fa-arrow-up text-red-500 text-2xl mr-3"></i>
                            <div>
                                <p class="text-sm text-gray-600">Tổng rút</p>
                                <p id="total-withdrawals" class="text-xl font-bold text-red-600">0 ₫</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <div class="flex items-center">
                            <i class="fas fa-exchange-alt text-blue-500 text-2xl mr-3"></i>
                            <div>
                                <p class="text-sm text-gray-600">Tổng giao dịch</p>
                                <p id="total-transactions" class="text-xl font-bold text-blue-600">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                        <div class="flex items-center">
                            <i class="fas fa-wallet text-purple-500 text-2xl mr-3"></i>
                            <div>
                                <p class="text-sm text-gray-600">Số dư ước tính</p>
                                <p id="estimated-balance" class="text-xl font-bold text-purple-600">0 ₫</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transaction History Table -->
                <div class="overflow-x-auto max-h-96 overflow-y-auto">
                    <table class="min-w-full text-sm">
                        <thead class="bg-gray-100 text-left sticky top-0">
                            <tr>
                                <th class="p-3 font-semibold">Ngày GD</th>
                                <th class="p-3 font-semibold">Mã GD</th>
                                <th class="p-3 font-semibold">Loại</th>
                                <th class="p-3 font-semibold">Khách hàng</th>
                                <th class="p-3 font-semibold text-right">Số tiền</th>
                                <th class="p-3 font-semibold">Nội dung</th>
                                <th class="p-3 font-semibold text-center">Trạng thái</th>
                                <th class="p-3 font-semibold">Người xử lý</th>
                            </tr>
                        </thead>
                        <tbody id="bank-history-tbody" class="divide-y divide-gray-200">
                            <!-- Dynamic content will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty State -->
                <div id="bank-history-empty" class="text-center py-12 hidden">
                    <i class="fas fa-inbox text-gray-400 text-4xl mb-4"></i>
                    <p class="text-gray-500 text-lg">Không có dữ liệu giao dịch</p>
                    <p class="text-gray-400 text-sm">Hãy thử điều chỉnh bộ lọc hoặc khoảng thời gian</p>
                </div>
            </div>
        </div>
    </div>

</div>

