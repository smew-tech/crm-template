<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đấu giá - eShopGlobal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar-transition { transition: transform 0.3s ease-in-out; }
        .countdown-timer { font-family: 'Monaco', monospace; }
        .notification-dot { 
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Mobile menu overlay -->
    <div id="mobile-overlay" class="fixed inset-0 z-40 lg:hidden hidden bg-black bg-opacity-50"></div>
    
    <!-- Sidebar -->
    <div id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform -translate-x-full lg:translate-x-0 sidebar-transition">
        <div class="flex items-center justify-between h-16 px-6 border-b border-gray-200">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                    <i class="fas fa-globe text-white text-sm"></i>
                </div>
                <span class="text-xl font-bold text-gray-900">eShopGlobal</span>
            </div>
            <button id="close-sidebar" class="lg:hidden text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <nav class="mt-6">
            <div class="px-3">
                <a href="#" class="nav-item flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors group">
                    <i class="fas fa-home w-5 h-5 text-gray-400 group-hover:text-blue-600"></i>
                    <span class="ml-3">Dashboard</span>
                </a>
                <a href="#" class="nav-item flex items-center px-3 py-2 mt-1 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors group">
                    <i class="fas fa-shopping-cart w-5 h-5 text-gray-400 group-hover:text-blue-600"></i>
                    <span class="ml-3">Đơn hàng</span>
                    <span class="ml-auto bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">5</span>
                </a>
                <a href="#" class="nav-item flex items-center px-3 py-2 mt-1 text-blue-600 bg-blue-50 rounded-lg transition-colors group">
                    <i class="fas fa-gavel w-5 h-5 text-blue-600"></i>
                    <span class="ml-3">Đấu giá</span>
                    <span class="ml-auto bg-yellow-100 text-yellow-600 text-xs px-2 py-1 rounded-full">3</span>
                </a>
                <a href="#" class="nav-item flex items-center px-3 py-2 mt-1 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors group">
                    <i class="fas fa-warehouse w-5 h-5 text-gray-400 group-hover:text-blue-600"></i>
                    <span class="ml-3">Kho hàng</span>
                    <span class="ml-auto bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full">12</span>
                </a>
                <a href="#" class="nav-item flex items-center px-3 py-2 mt-1 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors group">
                    <i class="fas fa-wallet w-5 h-5 text-gray-400 group-hover:text-blue-600"></i>
                    <span class="ml-3">Ví tiền</span>
                </a>
                <a href="#" class="nav-item flex items-center px-3 py-2 mt-1 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors group">
                    <i class="fas fa-user w-5 h-5 text-gray-400 group-hover:text-blue-600"></i>
                    <span class="ml-3">Tài khoản</span>
                </a>
            </div>
            
            <div class="mt-8 px-3 pt-6 border-t border-gray-200">
                <button class="flex items-center w-full px-3 py-2 text-gray-700 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors group">
                    <i class="fas fa-sign-out-alt w-5 h-5 text-gray-400 group-hover:text-red-600"></i>
                    <span class="ml-3">Đăng xuất</span>
                </button>
            </div>
        </nav>
    </div>

    <!-- Main content -->
    <div class="lg:pl-64">
        <!-- Top header -->
        <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40">
            <div class="flex items-center justify-between h-16 px-6">
                <div class="flex items-center">
                    <button id="open-sidebar" class="lg:hidden text-gray-500 hover:text-gray-700 mr-4">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="text-xl font-semibold text-gray-900">Quản lý đấu giá</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Search bar -->
                    <div class="hidden md:block">
                        <div class="relative">
                            <input type="text" id="global-search" placeholder="Tìm kiếm đấu giá, URL Yahoo..." 
                                   class="w-80 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                    </div>
                    
                    <!-- VIP Status -->
                    <button onclick="showModal('vip-modal')" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded-full text-xs font-medium">
                        <i class="fas fa-crown mr-1"></i>Kích hoạt VIP
                    </button>
                    
                    <!-- Notifications -->
                    <div class="relative">
                        <button class="relative text-gray-500 hover:text-gray-700">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full notification-dot"></span>
                        </button>
                    </div>
                    
                    <!-- User menu -->
                    <div class="relative">
                        <button id="user-menu-button" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900">
                            <img src="https://ui-avatars.com/api/?name=Nguyen+Van+A&background=3b82f6&color=fff" 
                                 alt="Avatar" class="w-8 h-8 rounded-full">
                            <span class="hidden md:block font-medium">Nguyễn Văn A</span>
                            <i class="fas fa-chevron-down text-sm"></i>
                        </button>
                        <div id="user-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Tài khoản</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Cài đặt</a>
                            <hr class="my-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Đăng xuất</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Page content -->
        <main class="p-6">
            <!-- VIP Status Banner -->
            <div class="bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 rounded-lg p-6 mb-8 text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold mb-2 flex items-center">
                            <i class="fas fa-crown mr-2"></i>
                            Chưa kích hoạt gói đấu giá
                        </h2>
                        <p class="opacity-90">Kích hoạt gói VIP để bắt đầu tham gia đấu giá trên Yahoo Auctions</p>
                    </div>
                    <button onclick="showModal('vip-modal')" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold px-6 py-3 rounded-lg transition-colors">
                        <i class="fas fa-rocket mr-2"></i>
                        Kích hoạt ngay
                    </button>
                </div>
            </div>

            <!-- Main Action Cards -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Create New Auction -->
                <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-plus text-blue-600"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900">Tạo đấu giá mới</h3>
                    </div>
                    <p class="text-gray-600 mb-4">Nhập link sản phẩm Yahoo Auctions để bắt đầu đấu giá</p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">URL Yahoo Auctions *</label>
                            <input type="text" id="auction-url" placeholder="https://page.auctions.yahoo.co.jp/jp/auction/..." 
                                   class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Giá đặt tối đa (¥)</label>
                                <input type="number" id="max-bid-input" placeholder="100000" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Loại đấu giá</label>
                                <select id="auction-type" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="normal">Đặt giá thường</option>
                                    <option value="snipe">Săn phút chót</option>
                                </select>
                            </div>
                        </div>
                        
                        <button onclick="createAuction()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium">
                            <i class="fas fa-gavel mr-2"></i>Tạo đấu giá ngay
                        </button>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="space-y-4">
                    <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900">Thống kê nhanh</h3>
                            <i class="fas fa-chart-bar text-gray-400"></i>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-center">
                                <p class="text-2xl font-bold text-green-600">3</p>
                                <p class="text-sm text-gray-600">Đang tham gia</p>
                            </div>
                            <div class="text-center">
                                <p class="text-2xl font-bold text-blue-600">24</p>
                                <p class="text-sm text-gray-600">Đã thắng</p>
                            </div>
                            <div class="text-center">
                                <p class="text-2xl font-bold text-red-600">12</p>
                                <p class="text-sm text-gray-600">Đã thua</p>
                            </div>
                            <div class="text-center">
                                <p class="text-2xl font-bold text-purple-600">78%</p>
                                <p class="text-sm text-gray-600">Tỷ lệ thắng</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <i class="fas fa-wallet text-green-600 mr-2"></i>
                                <p class="text-sm font-medium text-green-800">Số dư khả dụng</p>
                            </div>
                            <p class="text-lg font-bold text-green-900">15,750,000 ₫</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab navigation -->
            <div class="bg-white rounded-lg shadow-sm mb-6">
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6">
                        <button class="tab-button py-4 text-sm font-medium border-b-2 border-blue-500 text-blue-600" data-tab="active">
                            <i class="fas fa-clock mr-2"></i>Đang tham gia <span class="ml-1 bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-xs">3</span>
                        </button>
                        <button class="tab-button py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="won">
                            <i class="fas fa-trophy mr-2"></i>Đã thắng <span class="ml-1 bg-green-100 text-green-600 px-2 py-1 rounded-full text-xs">24</span>
                        </button>
                        <button class="tab-button py-4 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="lost">
                            <i class="fas fa-times-circle mr-2"></i>Đã thua <span class="ml-1 bg-red-100 text-red-600 px-2 py-1 rounded-full text-xs">12</span>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Active Auctions Tab -->
            <div id="active-tab" class="tab-content active">
                <div class="space-y-4">
                    <!-- Auction Item 1 - Leading -->
                    <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-4">
                                    <img src="https://via.placeholder.com/60x60.png?text=Rolex" alt="Product" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">Rolex Submariner Date</h4>
                                        <p class="text-sm text-gray-600">¥580,000 → ¥580,000 (Đang dẫn đầu)</p>
                                        <div class="flex items-center space-x-4 mt-1">
                                            <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">Săn phút chót</span>
                                            <span class="text-sm text-gray-500">02:14:35</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="showAuctionDetail('AUC001', 'Rolex Submariner Date', '580000', '580000', 'Đang dẫn đầu')" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-sm">
                                    <i class="fas fa-eye mr-1"></i>Chi tiết
                                </button>
                                <button onclick="showBidModal('AUC001', 'Rolex Submariner', '580000')" class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-gavel mr-1"></i>Thay đổi giá
                                </button>
                                <button onclick="cancelAuction('AUC001')" class="px-3 py-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm">
                                    <i class="fas fa-times mr-1"></i>Hủy
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Auction Item 2 - Outbid -->
                    <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-4">
                                    <img src="https://via.placeholder.com/60x60.png?text=Nintendo" alt="Product" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">Nintendo Switch OLED</h4>
                                        <p class="text-sm text-gray-600">¥46,500 → ¥45,000 (Bị vượt qua)</p>
                                        <div class="flex items-center space-x-4 mt-1">
                                            <span class="text-xs px-2 py-1 bg-orange-100 text-orange-800 rounded">Sắp kết thúc</span>
                                            <span class="text-sm text-gray-500">08:45:12</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="showAuctionDetail('AUC002', 'Nintendo Switch OLED', '46500', '45000', 'Bị vượt qua')" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-sm">
                                    <i class="fas fa-eye mr-1"></i>Chi tiết
                                </button>
                                <button onclick="showBidModal('AUC002', 'Nintendo Switch OLED', '46500')" class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-gavel mr-1"></i>Thay đổi giá
                                </button>
                                <button onclick="cancelAuction('AUC002')" class="px-3 py-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm">
                                    <i class="fas fa-times mr-1"></i>Hủy
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Auction Item 3 - Watching -->
                    <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-4">
                                    <img src="https://via.placeholder.com/60x60.png?text=Camera" alt="Product" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">Canon EOS R5</h4>
                                        <p class="text-sm text-gray-600">¥320,000 (Theo dõi)</p>
                                        <div class="flex items-center space-x-4 mt-1">
                                            <span class="text-xs px-2 py-1 bg-green-100 text-green-800 rounded">Có mua ngay</span>
                                            <span class="text-sm text-gray-500">1d 04:30:15</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="showAuctionDetail('AUC003', 'Canon EOS R5', '320000', '0', 'Theo dõi')" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-lg text-sm">
                                    <i class="fas fa-eye mr-1"></i>Chi tiết
                                </button>
                                <button onclick="showBidModal('AUC003', 'Canon EOS R5', '320000')" class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm">
                                    <i class="fas fa-gavel mr-1"></i>Thay đổi giá
                                </button>
                                <button onclick="cancelAuction('AUC003')" class="px-3 py-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm">
                                    <i class="fas fa-times mr-1"></i>Hủy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Won Auctions Tab -->
            <div id="won-tab" class="tab-content">
                 <div class="space-y-4">
                    <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-4">
                                    <img src="https://via.placeholder.com/60x60.png?text=PS5" alt="Product" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">PlayStation 5 Digital Edition</h4>
                                        <p class="text-sm text-gray-600">¥45,000 (Giá thắng) | Hoàn tất: 20/12/2024</p>
                                    </div>
                                </div>
                            </div>
                            <button class="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm"><i class="fas fa-shipping-fast mr-1"></i>Theo dõi</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lost Auctions Tab -->
            <div id="lost-tab" class="tab-content">
                <div class="space-y-4">
                    <div class="bg-white rounded-lg shadow-sm p-4 border-l-4 border-red-500">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-4">
                                    <img src="https://via.placeholder.com/60x60.png?text=iPhone" alt="Product" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">iPhone 15 Pro Max 1TB</h4>
                                        <p class="text-sm text-gray-600">¥125,000 (Giá của bạn) vs ¥127,000 (Giá thắng)</p>
                                    </div>
                                </div>
                            </div>
                            <button onclick="showAuctionDetail('AUC301', 'iPhone 15 Pro Max 1TB', '127000', '125000', 'Đã thua')" class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm"><i class="fas fa-eye mr-1"></i>Chi tiết</button>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Modals -->
    <!-- Bid Modal -->
    <div id="bid-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 modal-backdrop"></div>
            <div class="inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-xl">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Thay đổi giá đấu giá</h3>
                    <button class="modal-close text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                </div>
                <div class="space-y-4">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-medium text-gray-900 mb-2" id="bid-product-name">Rolex Submariner</h4>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div><span class="text-gray-600">Giá hiện tại:</span> <span class="font-medium text-purple-600" id="current-price">¥580,000</span></div>
                            <div><span class="text-gray-600">Bước giá:</span> <span class="font-medium" id="bid-step">¥5,000</span></div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giá đặt tối đa (¥) *</label>
                        <input type="number" id="max-bid" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="585000" min="585000">
                        <p class="text-xs text-gray-500 mt-1">Tối thiểu: ¥<span id="min-bid">585,000</span></p>
                    </div>
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" class="modal-close px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">Hủy</button>
                        <button type="button" onclick="placeBid()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Cập nhật giá</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- VIP Modal -->
    <div id="vip-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
         <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 modal-backdrop"></div>
            <div class="inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-xl">
                 <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Gói đấu giá VIP</h3>
                    <button class="modal-close text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                </div>
                <div class="space-y-4">
                    <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer vip-package" data-package="vip1">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-lg">VIP 1</h4><span class="text-xl font-bold text-blue-600">1,000,000 ₫</span>
                        </div>
                        <ul class="text-sm text-gray-600 space-y-1"><li>• Đấu giá tối đa 2 sản phẩm cùng lúc</li><li>• Phí hủy: 500,000₫/link</li><li>• Thời hạn: 30 ngày</li></ul>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer vip-package" data-package="vip2">
                         <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold text-lg">VIP 2</h4><span class="text-xl font-bold text-blue-600">2,000,000 ₫</span>
                        </div>
                        <ul class="text-sm text-gray-600 space-y-1"><li>• Đấu giá tối đa 50 sản phẩm cùng lúc</li><li>• Không giới hạn số tiền</li><li>• Phí hủy: 500,000₫/link</li><li>• Thời hạn: 30 ngày</li></ul>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" class="modal-close px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">Hủy</button>
                    <button type="button" id="activate-vip" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" disabled>Kích hoạt gói</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cancel Confirmation Modal -->
    <div id="cancel-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <div class="flex items-start space-x-3 mb-4">
                <div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-yellow-100">
                    <i class="fas fa-exclamation-triangle text-yellow-500 text-xl"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-900">Xóa phiên đấu giá này?</h3>
                </div>
            </div>
            <div class="text-sm text-gray-600 space-y-3 mb-6">
                <p><span class="font-semibold">Lưu ý:</span> Thao tác này chỉ ẩn phiên đấu giá trong danh sách sản phẩm đấu giá của bạn trên hệ thống. Phiên đấu giá vẫn tồn tại và các lượt đặt giá của bạn không bị xoá trên hệ thống của Yahoo Auction.</p>
                <p>Sau khi xóa, bạn vẫn có thể thắng phiên đấu giá này nếu nhà bán hủy giá thầu của các tài khoản có giá đấu cao hơn. Trong trường hợp này, chúng tôi sẽ tự động lên đơn hàng cho bạn!</p>
            </div>
            <div class="flex justify-end space-x-3">
                <button type="button" class="modal-close px-5 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium">Không</button>
                <button type="button" id="confirm-cancel-button" class="px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium">Đã hiểu, xóa!</button>
            </div>
        </div>
    </div>
    
    <!-- Bid History Modal -->
    <div id="bid-history-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 modal-backdrop"></div>
            <div class="inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-xl">
                 <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Lịch sử thay đổi giá</h3>
                    <button class="modal-close text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                </div>
                <div class="space-y-3" id="bid-history-content">
                    <!-- History items will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Auction Detail Modal -->
    <div id="auction-detail-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
             <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 modal-backdrop"></div>
            <div class="inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-xl">
                 <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-semibold text-gray-900">Chi tiết đấu giá</h3>
                    <button class="modal-close text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
                </div>
                <div class="space-y-6" id="auction-detail-content">
                    <!-- Detail content will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedVipPackage = null;
        let auctionToCancelId = null; 

        // Mobile sidebar toggle
        document.getElementById('open-sidebar').addEventListener('click', () => {
            document.getElementById('sidebar').classList.remove('-translate-x-full');
            document.getElementById('mobile-overlay').classList.remove('hidden');
        });

        const closeSidebar = () => {
            document.getElementById('sidebar').classList.add('-translate-x-full');
            document.getElementById('mobile-overlay').classList.add('hidden');
        };

        document.getElementById('close-sidebar').addEventListener('click', closeSidebar);
        document.getElementById('mobile-overlay').addEventListener('click', closeSidebar);

        // User menu toggle
        document.getElementById('user-menu-button').addEventListener('click', () => {
            document.getElementById('user-menu').classList.toggle('hidden');
        });

        document.addEventListener('click', event => {
            const userMenu = document.getElementById('user-menu');
            const userMenuButton = document.getElementById('user-menu-button');
            if (userMenu && !userMenu.contains(event.target) && userMenuButton && !userMenuButton.contains(event.target)) {
                userMenu.classList.add('hidden');
            }
        });

        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('border-blue-500', 'text-blue-600');
                    btn.classList.add('border-transparent', 'text-gray-500');
                });
                this.classList.add('border-blue-500', 'text-blue-600');
                
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(tabId + '-tab').classList.add('active');
            });
        });

        // Modal controls
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                if (modalId === 'cancel-modal') modal.classList.add('flex');
            }
        }

        function hideModal(modalId) {
             const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                if (modalId === 'cancel-modal') modal.classList.remove('flex');
            }
        }

        document.querySelectorAll('.modal-close, .modal-backdrop').forEach(el => {
            el.addEventListener('click', function() {
                const modal = this.closest('.fixed');
                if (modal) {
                    modal.classList.add('hidden');
                    if (modal.id === 'cancel-modal') modal.classList.remove('flex');
                }
            });
        });

        // Bid modal logic
        function showBidModal(auctionId, productName, currentPrice) {
            document.getElementById('bid-product-name').textContent = productName;
            document.getElementById('current-price').textContent = '¥' + Number(currentPrice).toLocaleString();
            const minBid = parseInt(currentPrice) + 5000;
            document.getElementById('min-bid').textContent = minBid.toLocaleString();
            document.getElementById('max-bid').min = minBid;
            document.getElementById('max-bid').placeholder = minBid;
            showModal('bid-modal');
        }

        function placeBid() {
            const maxBid = document.getElementById('max-bid').value;
            if (!maxBid || parseInt(maxBid) < parseInt(document.getElementById('max-bid').min)) {
                showNotification('Vui lòng nhập giá đặt hợp lệ!', 'error');
                return;
            }
            showNotification(`Đã cập nhật giá thành công!`);
            hideModal('bid-modal');
        }
        
        // Cancel Auction Logic
        function cancelAuction(auctionId) {
            auctionToCancelId = auctionId;
            showModal('cancel-modal');
        }

        document.getElementById('confirm-cancel-button').addEventListener('click', () => {
            if (auctionToCancelId) {
                showNotification(`Đã hủy đấu giá ${auctionToCancelId}. Phí hủy: 500,000₫`, 'error');
                hideModal('cancel-modal');
                auctionToCancelId = null;
            }
        });
        
        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            
            notification.className = `fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg text-white ${bgColor}`;
            notification.innerHTML = `<div class="flex items-center"><i class="fas fa-${icon} mr-2"></i><span>${message}</span></div>`;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 5000);
        }

        // Create auction function
        function createAuction() {
            const url = document.getElementById('auction-url').value.trim();
            const maxBid = document.getElementById('max-bid-input').value;
            if (!url || !maxBid || !url.includes('auctions.yahoo.co.jp')) {
                showNotification('Vui lòng điền URL Yahoo Auction và giá hợp lệ!', 'error');
                return;
            }
            showNotification(`Đã tạo đấu giá thành công!`);
            document.getElementById('auction-url').value = '';
            document.getElementById('max-bid-input').value = '';
        }

        // VIP Package Selection
         document.querySelectorAll('.vip-package').forEach(packageEl => {
            packageEl.addEventListener('click', function() {
                document.querySelectorAll('.vip-package').forEach(p => p.classList.remove('border-blue-500', 'bg-blue-50'));
                this.classList.add('border-blue-500', 'bg-blue-50');
                selectedVipPackage = this.dataset.package;
                document.getElementById('activate-vip').disabled = false;
            });
        });

        // Activate VIP
        document.getElementById('activate-vip').addEventListener('click', () => {
            if (selectedVipPackage) {
                showNotification(`Đã kích hoạt gói ${selectedVipPackage.toUpperCase()} thành công!`);
                hideModal('vip-modal');
            }
        });

        // Show auction detail
        function showAuctionDetail(auctionId, productName, currentPrice, yourPrice, status) {
            // This is a placeholder. In a real app, you would fetch and build the detail content.
            const detailContent = `
                <div class="flex items-start space-x-4">
                    <img src="https://via.placeholder.com/120x120.png?text=${productName.split(' ')[0]}" alt="Product" class="w-30 h-30 rounded-lg object-cover">
                    <div class="flex-1">
                        <h4 class="text-lg font-semibold text-gray-900 mb-2">${productName}</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div><p class="text-sm text-gray-500">Giá hiện tại</p><p class="text-lg font-bold text-purple-600">¥${Number(currentPrice).toLocaleString()}</p></div>
                            <div><p class="text-sm text-gray-500">Giá của bạn</p><p class="text-lg font-bold text-green-600">¥${Number(yourPrice).toLocaleString()}</p></div>
                            <div><p class="text-sm text-gray-500">Trạng thái</p><span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">${status}</span></div>
                            <div><p class="text-sm text-gray-500">ID</p><p class="font-mono text-sm">#${auctionId}</p></div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('auction-detail-content').innerHTML = detailContent;
            showModal('auction-detail-modal');
        }
    </script>
</body>
</html>
